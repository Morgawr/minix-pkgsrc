$NetBSD$

--- configure.orig	Fri Dec 12 08:40:04 2008
+++ configure
@@ -134,6 +134,20 @@ else
     extraobjs="$extraobjs strlcat.o"
 fi
 
+note 'siginterrupt'
+cat << EOF > testfile.c
+#include <signal.h>
+int main(void)
+{siginterrupt(1, 1);return 0;}
+EOF
+if gcc -Wall testfile.c -o testfile 2>&3; then
+    echo 'Found.'
+else
+    echo 'Not Found, adding.'
+    add_inc HAVE_NOSIGINTERRUPT
+    extraobjs="$extraobjs siginterrupt.o"
+fi
+
 note 'fgetln'
 cat << EOF > testfile.c
 #include <stdio.h>
@@ -163,32 +177,6 @@ else
     echo 'Fails.'
 fi
 
-
-if [ ! -r /usr/include/term.h ]; then
-    note 'term.h'
-    if [ -r /usr/include/ncurses/term.h ]; then
-	echo "Found in /usr/include/ncurses"
-	extraflags="$extraflags -I/usr/include/ncurses"
-    else
-	for i in pkg local; do
-	    if [ -r /usr/$i/include/term.h ]; then
-		echo "Found in /usr/$i/include"
-		extralibs="$extralibs -L/usr/$i/lib"
-		extraflags="$extraflags -I/usr/$i/include"
-		break
-	    else
-		false
-	    fi
-	done ||
-	{
-	    echo 'Not found!' >&2
-	    echo 'Do you have the ncurses devel package installed?' >&2
-	    echo 'If you know where term.h is, please email the author!' >&2
-	    exit 1
-	}
-    fi
-fi
-
 note 'base and dirname'
 if gcc_defines "__GLIBC__" || gcc_defines "__CYGWIN__" ; then
     echo 'Not present, adding.'
@@ -228,6 +216,10 @@ if uname -s | grep -q '^CYGWIN' ; then
     extralibs="$extralibs -Wl,--enable-auto-import"
 fi
 
+if uname -s | grep -q '^Minix' ; then
+    extraflags="$extraflags -D_MINIX -D_POSIX -I/usr/pkg/include -I/usr/pkg/include/ncurses"
+    extralibs="$extralibs -L/usr/pkg/lib"
+fi
 
 rm testfile*
 

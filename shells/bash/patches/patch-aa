--- lib/sh/fpurge.c.orig	Wed Dec 22 14:32:58 2010
+++ lib/sh/fpurge.c	Thu Jun  2 10:51:18 2011
@@ -185,6 +185,11 @@
   fp->_wcount = 0;
   fp->_ungetc_count = 0;
   return 0;
+#elif __minix  
+  fp->_ptr = fp->_buf;
+  if (fp->_ptr != NULL)
+    fp->_count = 0;
+  return 0;
 # elif defined _IOERR || defined __TANDEM    /* AIX, HP-UX, IRIX, OSF/1, Solaris, OpenServer, mingw */
   fp->_ptr = fp->_base;
   if (fp->_ptr != NULL)
